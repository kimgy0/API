#### SQL

<hr></hr>

###### 멤버테이블 생성

```sql
create table member(id bigint generated by default as identity, name varchar(255), primary key(id));
```

<img src="IMG\1.PNG" alt="image-20210115024745077" style="zoom:80%;" />



<center><small>id라는 이름의 (java)에선 Long이지만, sql에서는 bigint<br>
generated by default as identity -> 값을 세팅하지않고 <br>insert하면 db가 들어왔을 때 자동으로 id 값을 채워줍니다.<br>
    </small></center>



###### 테이블 조회

```sql
select * from member;
```

``` select * from member where column```

<u>참고</u>

Let's start by explaining what query parameters are.

Query parameters are a way to build and execute parameterized queries. So, instead of:

```sql
SELECT * FROM employees e WHERE e.emp_number = '123';
```

We'd do:

```sql
SELECT * FROM employees e WHERE e.emp_number = ?;
```

By using a JDBC prepared statement, we need to set the parameter before executing the query:

```java
pStatement.setString(1, 123);
```



###### value 삽입

```sql
insert into member(name) values('spring')
```

<img src="SQL\2.PNG" alt="image-20210115024745077" style="zoom:80%;" />

<hr></hr>

<img src="IMG\3.PNG" alt="image-20210115024745077" style="zoom:80%;" />

<center>👺TIP</center>

<center><small> 보통은 프로젝트 밑의 sql폴더를 생성하고 따로 그 안에 sql확장자 파일을 관리합니다.</small></center>

<img src="IMG\4.PNG" alt="image-20210115024745077" style="zoom:80%;" />



#### JPA

<HR></HR>

**setParameter (2) - 위치 기준 파라미터 바인딩**

```java
public static void NamedParameter2(EntityManager em, String param1) {
	String jpql = "SELECT b FROM Book b WHERE title = ?1";
	TypedQuery<Book> query = em.createQuery(jpql, Book.class);
	query.setParameter(1, param1);
	
	List<Book> bookList = query.getResultList();
	for( Book book : bookList) {
		System.out.println(book.getTitle());
	}
}
```

이름 기준 파라미터 바인딩 방식과 유사하지만, 이름이 아닌 **위치를 기준**으로 바인딩이 이루어집니다.

또한 데이터가 추가될 곳을 지정하는 기호가 다른데, 위치 기준 방식에서는 물음표( ? )를 사용합니다.

setParameter() 메서드를 호출하는 방식은 같습니다.



두 가지 방식의 기능적 차이는 없으므로, 편한대로 사용하시면 됩니다.

단, 동적으로 추가되는 데이터는 꼭 바인딩을 해서 사용해야 합니다.

```java
String jpql = "SELECT b FROM Book b WHERE title = " + param1;
```

이런 식으로 데이터를 직접 바인딩 할 경우, **SQL Injection의 위험이 있으니 꼭 setParameter() 메서드를 호출하여 동적으로 데이터를 바인딩을 해야 합니다.**

 더 자세한 팁: https://victorydntmd.tistory.com/205

