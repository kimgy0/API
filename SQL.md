#### SQL

<hr></hr>

###### ë©¤ë²„í…Œì´ë¸” ìƒì„±

```sql
create table member(id bigint generated by default as identity, name varchar(255), primary key(id));
```

<img src="IMG\1.PNG" alt="image-20210115024745077" style="zoom:80%;" />



<center><small>idë¼ëŠ” ì´ë¦„ì˜ (java)ì—ì„  Longì´ì§€ë§Œ, sqlì—ì„œëŠ” bigint<br>
generated by default as identity -> ê°’ì„ ì„¸íŒ…í•˜ì§€ì•Šê³  <br>insertí•˜ë©´ dbê°€ ë“¤ì–´ì™”ì„ ë•Œ ìë™ìœ¼ë¡œ id ê°’ì„ ì±„ì›Œì¤ë‹ˆë‹¤.<br>
    </small></center>



###### í…Œì´ë¸” ì¡°íšŒ

```sql
select * from member;
```

``` select * from member where column```

<u>ì°¸ê³ </u>

Let's start by explaining what query parameters are.

Query parameters are a way to build and execute parameterized queries. So, instead of:

```sql
SELECT * FROM employees e WHERE e.emp_number = '123';
```

We'd do:

```sql
SELECT * FROM employees e WHERE e.emp_number = ?;
```

By using a JDBC prepared statement, we need to set the parameter before executing the query:

```java
pStatement.setString(1, 123);
```



###### value ì‚½ì…

```sql
insert into member(name) values('spring')
```

<img src="SQL\2.PNG" alt="image-20210115024745077" style="zoom:80%;" />

<hr></hr>

<img src="IMG\3.PNG" alt="image-20210115024745077" style="zoom:80%;" />

<center>ğŸ‘ºTIP</center>

<center><small>Â ë³´í†µì€ í”„ë¡œì íŠ¸ ë°‘ì˜ sqlí´ë”ë¥¼ ìƒì„±í•˜ê³  ë”°ë¡œ ê·¸ ì•ˆì— sqlí™•ì¥ì íŒŒì¼ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.</small></center>

<img src="IMG\4.PNG" alt="image-20210115024745077" style="zoom:80%;" />



#### JPA

<HR></HR>

**setParameter (2) - ìœ„ì¹˜ ê¸°ì¤€ íŒŒë¼ë¯¸í„° ë°”ì¸ë”©**

```java
public static void NamedParameter2(EntityManager em, String param1) {
	String jpql = "SELECT b FROM Book b WHERE title = ?1";
	TypedQuery<Book> query = em.createQuery(jpql, Book.class);
	query.setParameter(1, param1);
	
	List<Book> bookList = query.getResultList();
	for( Book book : bookList) {
		System.out.println(book.getTitle());
	}
}
```

ì´ë¦„ ê¸°ì¤€ íŒŒë¼ë¯¸í„° ë°”ì¸ë”© ë°©ì‹ê³¼ ìœ ì‚¬í•˜ì§€ë§Œ, ì´ë¦„ì´ ì•„ë‹Œ **ìœ„ì¹˜ë¥¼ ê¸°ì¤€**ìœ¼ë¡œ ë°”ì¸ë”©ì´ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤.

ë˜í•œ ë°ì´í„°ê°€ ì¶”ê°€ë  ê³³ì„ ì§€ì •í•˜ëŠ” ê¸°í˜¸ê°€ ë‹¤ë¥¸ë°, ìœ„ì¹˜ ê¸°ì¤€ ë°©ì‹ì—ì„œëŠ” ë¬¼ìŒí‘œ( ? )ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

setParameter() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ë°©ì‹ì€ ê°™ìŠµë‹ˆë‹¤.



ë‘ ê°€ì§€ ë°©ì‹ì˜ ê¸°ëŠ¥ì  ì°¨ì´ëŠ” ì—†ìœ¼ë¯€ë¡œ, í¸í•œëŒ€ë¡œ ì‚¬ìš©í•˜ì‹œë©´ ë©ë‹ˆë‹¤.

ë‹¨, ë™ì ìœ¼ë¡œ ì¶”ê°€ë˜ëŠ” ë°ì´í„°ëŠ” ê¼­ ë°”ì¸ë”©ì„ í•´ì„œ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

```java
String jpql = "SELECT b FROM Book b WHERE title = " + param1;
```

ì´ëŸ° ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì§ì ‘ ë°”ì¸ë”© í•  ê²½ìš°, **SQL Injectionì˜ ìœ„í—˜ì´ ìˆìœ¼ë‹ˆ ê¼­ setParameter() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ë™ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë°”ì¸ë”©ì„ í•´ì•¼ í•©ë‹ˆë‹¤.**

 ë” ìì„¸í•œ íŒ: https://victorydntmd.tistory.com/205

